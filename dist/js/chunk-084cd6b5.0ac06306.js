(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-084cd6b5"],{"064a":function(t,e,s){"use strict";s("663a")},"0782":function(t,e,s){},1388:function(t,e,s){},"5cbe":function(t,e,s){t.exports=s.p+"img/recommend_bg.794b6628.jpg"},"663a":function(t,e,s){},"77b8":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"home"}},[s("nav-bar",{staticClass:"home-nav"},[s("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),s("scroll",{ref:"scroll",staticClass:"content",attrs:{probeType:3,"pull-up-load":!0},on:{scroll:t.contentscroll,pullingUp:t.loadmore}},[s("home-swiper",{attrs:{banners:t.banners},on:{swiperimageload:t.swiperimageload}}),s("recommend-view",{attrs:{recommends:t.recommends}}),s("feature-view"),s("tab-control",{ref:"tabControl",attrs:{titles:["流行","新款","精选"]},on:{tabclick:t.tabclick}}),s("goods-list",{attrs:{goods:t.showGoods}})],1),s("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isshowscroll,expression:"isshowscroll"}],nativeOn:{click:function(e){return t.backclick(e)}}})],1)},a=[],o=s("a7ac"),i=s("1bab");function n(){return Object(i["a"])({url:"/home/multidata"})}function l(t,e){return Object(i["a"])({url:"/home/data",params:{type:t,page:e}})}var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("swiper",t._l(t.banners,(function(e,r){return s("swiper-item",{key:r},[s("a",{attrs:{href:e.link}},[s("img",{attrs:{src:e.image,alt:""},on:{load:t.imageLoad}})])])})),1)},u=[],m=s("ace8"),d=s("09fc"),p={name:"HomeSwiper",data(){return{isLoad:!1}},props:{banners:{type:Array,default(){return[]}}},components:{Swiper:m["a"],SwiperItem:d["a"]},methods:{imageLoad(){this.isLoad||(this.$emit("swipperImageLoad"),this.isLoad=!0)}}},h=p,f=s("2877"),b=Object(f["a"])(h,c,u,!1,null,"29673418",null),g=b.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"recommend"},t._l(t.recommends,(function(e){return s("div",{staticClass:"recommend-items"},[s("a",{attrs:{href:e.link}},[s("img",{attrs:{src:e.image,alt:""}}),s("div",[t._v(t._s(e.title))])])])})),0)},w=[],k={props:{recommends:{type:Array,default(){return[]}}}},_=k,$=(s("80f4"),Object(f["a"])(_,v,w,!1,null,null,null)),y=$.exports,T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"feature"},[r("a",{attrs:{href:"https://act.mogujie.com/zzlx67"}},[r("img",{attrs:{src:s("5cbe"),alt:""}})])])}],O={},j=O,C=(s("064a"),Object(f["a"])(j,T,x,!1,null,null,null)),H=C.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,r){return s("div",{staticClass:"tab-control-item",class:{active:r===t.currentIndex},on:{click:function(e){return t.itemclick(r)}}},[s("span",[t._v(t._s(e))])])})),0)},L=[],E={props:{titles:{type:Array,default(){return[]}}},data(){return{currentIndex:0}},methods:{itemclick(t){this.currentIndex=t,this.$emit("tabclick",t)}}},I=E,S=(s("da7d"),Object(f["a"])(I,G,L,!1,null,null,null)),Y=S.exports,A=s("6d71"),z=s("5d17"),B=s("725f"),J=s("90b9"),M={name:"home",components:{NavBar:o["a"],HomeSwiper:g,RecommendView:y,FeatureView:H,TabControl:Y,getHomeGoods:l,GoodsList:A["a"],Scroll:z["a"],BackTop:B["a"]},data(){return{banners:[],recommends:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",isshowscroll:!1,tabOffsetTop:0,saveY:0,itemimagelister:null}},created(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},mounted(){const t=Object(J["a"])(this.$refs.scroll.refresh,100);this.itemimagelister=()=>{t()},this.$bus.$on("itemimageload",this.itemimagelister)},activated(){this.$refs.scroll.refresh(),this.$refs.scroll.scrollTo(0,this.saveY,0)},deactivated(){this.saveY=this.$refs.scroll.getY(),this.$bus.$off("itemimageload",this.itemimagelister)},computed:{showGoods(){return this.goods[this.currentType].list}},methods:{tabclick(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}},backclick(){this.$refs.scroll.scrollTo(0,0)},contentscroll(t){this.isshowscroll=-t.y>1500},loadmore(){this.getHomeGoods(this.currentType),this.$refs.scroll.scroll.refresh()},debounce(t,e){let s=null;return function(...r){s&&clearTimeout(s),s=setTimeout(()=>{t.apply(this,r)},e)}},swiperimageload(){this.tabOffsetTop=this.$refs.tabControl.$el.offsetTop},getHomeMultidata(){n().then(t=>{this.banners=t.data.banner.list,this.recommends=t.data.recommend.list})},getHomeGoods(t){const e=this.goods[t].page+1;l(t,e).then(e=>{this.goods[t].list.push(...e.data.list),this.goods[t].page,this.$refs.scroll.finishPullUp()})}}},N=M,U=(s("fb11"),Object(f["a"])(N,r,a,!1,null,"77703af5",null));e["default"]=U.exports},"80f4":function(t,e,s){"use strict";s("1388")},c25a:function(t,e,s){},da7d:function(t,e,s){"use strict";s("0782")},fb11:function(t,e,s){"use strict";s("c25a")}}]);
//# sourceMappingURL=chunk-084cd6b5.0ac06306.js.map